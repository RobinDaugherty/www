---
import type { CollectionEntry } from 'astro:content';
import Layout from './MainLayout.astro';
import FormattedDate from '../components/FormattedDate.astro';
import { Picture } from 'astro:assets';

type Props = {
	post: CollectionEntry<'post'>;
};

const { post } = Astro.props;
const { title, description, heroImage, publishedDate, updatedDate } = post.data;
const { Content } = await post.render();
---

<Layout pageTitle={title} pageDescription={description}>
	<article>
		<div class="article-header">
			{
				heroImage && (
					<hero>
						<Picture src={heroImage} alt="" />
					</hero>
				)
			}
			<h1>{title}</h1>
			<div class="pub-date">
				<FormattedDate date={publishedDate} />
				{
					updatedDate && (
						<>
							{' '}
							<span>
								(Updated on <FormattedDate date={updatedDate} />)
							</span>
						</>
					)
				}
			</div>
		</div>
		<Content />
		<p><a href="/">Back to root</a></p>
	</article>
</Layout>
<style is:global>
	h1 {
		font-size: 2em;
	}

	.pub-date {
		font-family: var(--font-headings);
		font-size: 80%;
		color: var(--color-secondary);
	}

	pre {
		font-family: 'Source Code Pro', 'Courier New', Courier, monospace;
	}

	table {
		border-collapse: collapse;
		th,
		td {
			padding: 0.2em;
			border: 1pt solid var(--color-secondary);
		}
		th {
			text-align: left;
		}
	}
</style>
